@{
    ViewData["Title"] = "Kết quả thanh toán MoMo";
}
<div class="container py-5 text-center">
    @if (ViewBag.ResultCode == "0")
    {
        <div class="alert alert-success text-center">
            <h3>Thanh toán thành công!</h3>
            <p>Mã giao dịch MoMo: <strong>@ViewBag.OrderId</strong></p>
            <p id="countdown">Tự động về giỏ hàng trong <span>3</span>s...</p>
        </div>

        <script>
            let seconds = 3;
            const countdown = setInterval(() => {
                seconds--;
                const span = document.querySelector("#countdown span");
                if (span) span.innerText = seconds;
                if (seconds <= 0) {
                    clearInterval(countdown);
                    window.location.href = "/Cart";
                }
            }, 1000);
        </script>
    }
    else
    {
        <div class="alert alert-danger text-center">
            <h3>Thanh toán thất bại!</h3>
            <p>@(string.IsNullOrEmpty(ViewBag.Message) ? "Vui lòng thử lại." : ViewBag.Message)</p>
            <a href="/Cart" class="btn btn-warning mt-3 px-5">Quay lại giỏ hàng</a>
        </div>
    }
</div>